---
import Header from "../../components/header.astro";
import Footer from "../../components/footer.astro";
import Narration from "../../components/Narration.astro";
import TodayScheduleImage from "../../components/TodayScheduleImage.astro";
import CalendarImages from "../../components/CalendarImages.astro";
import "../../styles/style.css";
import { ClientRouter } from "astro:transitions";
---

<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>砂辺クリニック内科</title>
    <link rel="stylesheet" href="style-main.css" />
    <script src="https://js.ptengine.jp/554zwt96.js"></script>
    <meta
      name="description"
      content="沖縄・北谷の砂辺クリニック。内科・皮膚科・漢方の予約診療に対応し、健康・レシピ情報も掲載。スマホでも見やすく、使いやすい公式サイト。"
    />
  </head>

  <body>
    <Header />

    <main>
      <section>
        <h1>砂辺クリニック内科</h1>
        <img id="slideshow-top" class="responsive-img" alt="トップ画像" />
        <h2>予約のない方の待ち時間は長くなっています。</h2>
      </section>

      <Narration />

      <section class="promo">
        <div class="sns-buttons">
          <a href="https://lin.ee/56a0xBp"
            ><img
              src="../images/10000.jpg"
              alt="LINE予約1"
              class="fixed-size"
            /></a
          >
          <a href="https://lin.ee/56a0xBp"
            ><img
              src="../images/10001.jpg"
              alt="LINE予約2"
              class="fixed-size"
            /></a
          >
          <a href="tel:098-936-6270"
            ><img src="../images/10002.jpg" alt="電話" class="fixed-size" /></a
          >
        </div>
      </section>

      <section class="promo">
        <div class="sns-buttons">
          <a href="na/na1"
            ><img src="../images/na1.jpg" alt="hi1" class="fixed-size" /></a
          >
          <a href="na/na2"
            ><img src="../images/na2.jpg" alt="hi2" class="fixed-size" /></a
          >
          <a href="na/na3"
            ><img src="../images/na3.jpg" alt="hi3" class="fixed-size" /></a
          >
          <a href="na/na4"
            ><img src="../images/na4.jpg" alt="hi4" class="fixed-size" /></a
          >
          <a href="na/na5"
            ><img src="../images/na5.jpg" alt="hi5" class="fixed-size" /></a
          >
          <a href="na/na6"
            ><img src="../images/na6.jpg" alt="hi6" class="fixed-size" /></a
          >
          <a href="na/na7"
            ><img src="../images/na7.jpg" alt="hi7" class="fixed-size" /></a
          >
          <a href="na/na8"
            ><img src="../images/na8.jpg" alt="hi8" class="fixed-size" /></a
          >
          <a href="na/na9"
            ><img src="../images/na9.jpg" alt="hi9" class="fixed-size" /></a
          >
          <a href="na/na10"
            ><img src="../images/na10.jpg" alt="hi10" class="fixed-size" /></a
          >
          <a href="na/na11"
            ><img src="../images/na11.jpg" alt="hi11" class="fixed-size" /></a
          >
          <a href="na/na12"
            ><img src="../images/na12.jpg" alt="hi12" class="fixed-size" /></a
          >
          <a href="na/na13"
            ><img src="../images/na13.jpg" alt="hi13" class="fixed-size" /></a
          >
          <a href="na/na14"
            ><img src="../images/na14.jpg" alt="hi13" class="fixed-size" /></a
          >
        </div>
      </section>

      <section class="slides">
        <h2>か～るくな～れ（毎時間１日２４回更新）</h2>
        <img id="slideshow-1" class="responsive-img fade-up" alt="スライド1" />
        <h2>げんえん・軽塩（毎時間１日２４回更新）</h2>
        <img id="slideshow-2" class="responsive-img fade-up" alt="スライド2" />
        <h2>治そうとうにょう（毎時間１日２４回上映）</h2>
        <img id="slideshow-3" class="responsive-img fade-up" alt="スライド3" />
      </section>

      <ClientRouter />
    </main>

    <a href="https://lin.ee/56a0xBp" target="_blank" class="fixed-button"
      >LINEで予約する</a
    >

    <Footer />

    <TodayScheduleImage />

    <script>
      const scheduleInfo = [
        { startHour: 0, image: "../images/mid-2.gif" },
        { startHour: 1, image: "../images/mid-3.gif" },
        { startHour: 2, image: "../images/mid-1.gif" },
        { startHour: 3, image: "../images/mid-2.gif" },
        { startHour: 4, image: "../images/mid-3.gif" },
        { startHour: 5, image: "../images/mor-5.gif" },
        { startHour: 6, image: "../images/mor-6.gif" },
        { startHour: 7, image: "../images/mor-7.gif" },
        { startHour: 8, image: "../images/mor-8.gif" },
        { startHour: 9, image: "../images/mor-9.gif" },
        { startHour: 10, image: "../images/mor-10.gif" },
        { startHour: 12, image: "../images/kon-5.gif" },
        { startHour: 13, image: "../images/kon-5.gif" },
        { startHour: 14, image: "../images/kon-6.gif" },
        { startHour: 15, image: "../images/aft-1.gif" },
        { startHour: 16, image: "../images/aft-2.gif" },
        { startHour: 17, image: "../images/aft-3.gif" },
        { startHour: 18, image: "../images/aft-4.gif" },
        { startHour: 19, image: "../images/oya-2.gif" },
        { startHour: 20, image: "../images/oya-3.gif" },
        { startHour: 21, image: "../images/oya-4.gif" },
        { startHour: 22, image: "../images/oya-5.gif" },
        { startHour: 23, image: "../images/mid-1.gif" },
      ];

      const schedule1 = [
        { startHour: 0, image: "../images/004035.gif" },
        { startHour: 1, image: "../images/004034.gif" },
        { startHour: 2, image: "../images/004033.gif" },
        { startHour: 3, image: "../images/004032.gif" },
        { startHour: 4, image: "../images/004031.gif" },
        { startHour: 5, image: "../images/004030.gif" },
        { startHour: 6, image: "../images/004029.gif" },
        { startHour: 7, image: "../images/004028.gif" },
        { startHour: 8, image: "../images/004027.gif" },
        { startHour: 9, image: "../images/004026.gif" },
        { startHour: 10, image: "../images/004025.gif" },
        { startHour: 11, image: "../images/004024.gif" },
        { startHour: 12, image: "../images/004035.gif" },
        { startHour: 13, image: "../images/004034.gif" },
        { startHour: 14, image: "../images/004033.gif" },
        { startHour: 15, image: "../images/004032.gif" },
        { startHour: 16, image: "../images/004031.gif" },
        { startHour: 17, image: "../images/004030.gif" },
        { startHour: 18, image: "../images/004029.gif" },
        { startHour: 19, image: "../images/004028.gif" },
        { startHour: 20, image: "../images/004027.gif" },
        { startHour: 21, image: "../images/004026.gif" },
        { startHour: 22, image: "../images/004025.gif" },
        { startHour: 23, image: "../images/004011.gif" },
      ];

      const schedule2 = [
        { startHour: 0, image: "../images/enb1.gif" },
        { startHour: 1, image: "../images/enb2.gif" },
        { startHour: 2, image: "../images/enb3.gif" },
        { startHour: 3, image: "../images/enb4.gif" },
        { startHour: 4, image: "../images/enb6.gif" },
        { startHour: 5, image: "../images/enb7.gif" },
        { startHour: 6, image: "../images/enb5.gif" },
        { startHour: 7, image: "../images/enb8.gif" },
        { startHour: 8, image: "../images/enb9.gif" },
        { startHour: 9, image: "../images/enb10.gif" },
        { startHour: 10, image: "../images/enb11.gif" },
        { startHour: 11, image: "../images/enb12.gif" },
        { startHour: 12, image: "../images/enb13.gif" },
        { startHour: 13, image: "../images/enb14.gif" },
        { startHour: 14, image: "../images/enb15.gif" },
        { startHour: 15, image: "../images/enb16.gif" },
        { startHour: 16, image: "../images/enb17.gif" },
        { startHour: 17, image: "../images/enb18.gif" },
        { startHour: 18, image: "../images/enb1.gif" },
        { startHour: 19, image: "../images/enb2.gif" },
        { startHour: 20, image: "../images/enb3.gif" },
        { startHour: 21, image: "../images/enb4.gif" },
        { startHour: 22, image: "../images/enb5.gif" },
        { startHour: 23, image: "../images/enb6.gif" },
      ];

      const schedule3 = [
        { startHour: 0, image: "../images/008001.gif" },
        { startHour: 1, image: "../images/008002.gif" },
        { startHour: 2, image: "../images/008003.gif" },
        { startHour: 3, image: "../images/008004.gif" },
        { startHour: 4, image: "../images/008005.gif" },
        { startHour: 5, image: "../images/008006.gif" },
        { startHour: 6, image: "../images/008007.gif" },
        { startHour: 7, image: "../images/008008.gif" },
        { startHour: 8, image: "../images/008009.gif" },
        { startHour: 9, image: "../images/008010.gif" },
        { startHour: 10, image: "../images/008011.gif" },
        { startHour: 11, image: "../images/008012.gif" },
        { startHour: 12, image: "../images/008013.gif" },
        { startHour: 13, image: "../images/008014.gif" },
        { startHour: 14, image: "../images/008015.gif" },
        { startHour: 15, image: "../images/008016.gif" },
        { startHour: 16, image: "../images/008017.gif" },
        { startHour: 17, image: "../images/008018.gif" },
        { startHour: 18, image: "../images/008019.gif" },
        { startHour: 19, image: "../images/008020.gif" },
        { startHour: 20, image: "../images/008021.gif" },
        { startHour: 21, image: "../images/008022.gif" },
        { startHour: 22, image: "../images/008023.gif" },
        { startHour: 23, image: "../images/008024.gif" },
        { startHour: 24, image: "../images/008025.gif" },
      ];

      // @ts-ignore
      function getImageForSchedule(schedule) {
        const now = new Date();
        const hour = now.getHours();
        for (let i = schedule.length - 1; i >= 0; i--) {
          if (hour >= schedule[i].startHour) return schedule[i].image;
        }
        return schedule[schedule.length - 1].image;
      }
      const slideshowIds = [
        ["slideshow-info", scheduleInfo],
        ["slideshow-1", schedule1],
        ["slideshow-2", schedule2],
        ["slideshow-3", schedule3],
      ];

      function updateAllSlideshows() {
        slideshowIds.forEach(([id, schedule]) => {
          // @ts-ignore
          const element = document.getElementById(id);
          // @ts-ignore
          if (element) element.src = getImageForSchedule(schedule);
        });
      }

      // 初期表示
      updateAllSlideshows();

      // 必要に応じて、定期更新も可能
      setInterval(updateAllSlideshows, 10 * 60 * 1000); // 10分ごとに更新
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("show");
            }
          });
        });

        document
          .querySelectorAll(".fade-up")
          .forEach((el) => observer.observe(el));
      });
    </script>
  </body>
</html>
